# 以太坊相关


### epoch，slot，block
epoch是32个slot，slot里面可以放一个块，也可以不放（很少情况下不放），每32个slot有个checkpoint，当到达64个slot时，32个slot位置就变成了safe,等出到96个slot时，64个slot位置就变成了safe而32个slot位置就变成了finelize。


## 以太坊是如何查找数据的
1. 生成键（Key）
以太坊根据要查找的数据类型，生成对应的键值。例如：

如果要查找一个区块，则使用该区块的哈希作为键。
如果要查找一个账户的状态，则使用账户地址的哈希。
如果要查找智能合约的存储数据，则使用存储位置的哈希作为键

1. 账户状态查找
以太坊使用了账户模型，每个账户的信息（包括余额、nonce、存储状态等）存储在全局状态树中，称为世界状态树。这是一个基于Merkle Patricia Trie的数据结构。

查找过程：当你查询一个账户状态时，系统会根据账户的地址计算哈希值，然后在世界状态树中通过该哈希值找到对应的节点。这种查找过程类似于传统的树形结构查找，只不过它通过哈希值进行路径定位。
2. 合约存储数据查找
每个智能合约都有自己的存储树，合约的存储是基于键值对的结构。智能合约中的存储也是使用Merkle Patricia Trie保存的。

存储查找：对于一个特定合约存储中的变量，以太坊会将变量的键（即存储位置）进行哈希，然后在合约的存储树中查找与该哈希值对应的数据。
3. 交易和区块查找
以太坊中的每一个区块都保存了交易记录和相关信息。区块中的数据查找涉及以下几个步骤：

区块查找：以太坊的每个区块都有一个哈希值，通过区块哈希可以唯一标识区块。根据区块链的结构，可以通过区块哈希值查找到对应的区块数据。
交易查找：区块中保存了交易的哈希树，称为交易Merkle树。每笔交易有一个唯一的哈希值，查找特定交易时，会通过交易哈希在区块的交易Merkle树中进行查找。

## evm虚拟机如何对opcode进行跳表并且保障进行跳表操作时不会跳转到参数部分

在以太坊虚拟机（EVM）中，跳转（JUMP 和 JUMPI 指令）通过一个跳表机制来优化跳转操作。为确保跳转不会跳到参数部分，EVM 使用以下两种方法：

有效跳转目的地（jumpdest）检查：EVM 在执行跳转时，只允许跳到特定的指令 JUMPDEST。每个代码段在编译时会标记出所有合法的跳转位置，保障跳转安全。

静态分析：EVM 在执行合约前，扫描代码以标记合法的 JUMPDEST，确保不会跳转到参数或数据部分。


