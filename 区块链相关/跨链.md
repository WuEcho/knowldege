# 跨链


##实现技术

###1.公证人机制

瑞波实验室提出的InterLedger协议，InterLedger协议使两个不同的记账系统可以通过第三方连接器或验证器互相自由的传输货币。公证人机制是基于InterLedger协议创造的一种技术框架。

**公证人机制包含如下几种：**

- 单签名公证人

 也叫中心化公证人机制，通常由单一指定的独立节点或结构充当，承担了数据收集-交易确认-验证的任务
 
- 多签名公证人机制

由多名公证人在各自账本上共同签名打成共识后才能完成交易，多签名公证人每个节点都拥有自己的密钥，当达到一定签名数量或比例时，跨链交易才被确认

- 分布式签名公证人机制

分布式签名公证人机制和多重签名公证人机制最大的区别在于签名方式不同，它采用多方计算

公证人机制是双向跨链，易实现和操作，缺点是容易产生中心化

###2.哈希锁定

全程哈希时间锁定合约，指用户在规定的时间段对于哈希值的原值进行猜测来支付的一种机制。简单说，就是在智能合约的基础上，双方先锁定资产，如果都在有限的时间内输入正确的哈希值的原值，即可完成交易。

实现方法：有两个锁，一个是哈希锁，一个是时间锁。通过哈希值上锁，上锁之后只有用产生这个哈希值的原本值进行解锁。时间锁要求在规定时间内输入哈希锁密码，如果超时即使输入密码，时间锁仍不会开启。

闪电网络的关键技术是哈希锁定技术

###3.侧链、中继
btc-Rely,polkadot,cosmos
侧链中继可以在多条主链中加入一个数据结构，然后基于这个数据结构，主链与主链之间就可以进行数据交互。还需要调用一个主链上这个数据结构的api，实现监听并验证另一条链上的交易。

使用中继技术后，数据的传输更为灵活，中继仅仅充当数据收集者的角色，目标链收到发送链数据后由接收链自行验证完成确认交易。btc-rely依赖spv证明，Cosmos依靠验证节点签名数量。

侧链是以锚定某种原链上的代币为基础的新型区块链，侧链能读取主链的事件和状态，即支持spv(simple payment verification),能够验证块上header,merkle tree的信息，但主链不知道侧链的存在。

cosmos上的第一个空间叫做”Cosmos Hub“,cosmos hub中心是一种多资产权益证明加密货币网络，通过简单地管理机制来实现网络的改动和更新，还可以通过连接其他空间来实现扩展。cosmos网络的中心及各个空间可以通过区块链间通信（IBC）协议进行沟通，协议针对区块链网络，类似tcp,udp网络协议。代币可以安全快速从一个空间传递到另一个空间。它记录每个空间持有的代币总量。

###4.分布式私钥控制

分布式私钥就是把一个区块链里面的私钥分成N份，把它拆分成N份之后，同时再把它分给N个参与者，参与者每人掌握一部分私钥，只有集齐了其中的K(K<=N)个私钥的分配之后才能出完整的一个私钥，恢复完整私钥才能够对这个私钥上面的资产进行解锁。

原有加密资产被转移到跨链上时，跨链节点会在已有合约中为用户发放等值代币，为了原有链上的资产在跨链上依然可以交易，原有资产在跨链上进行分布式控制权管理的操作有**锁定**和**解锁**。

**锁定：**对所有通过密钥控制的数字资产实现分布式控制权管理和资产映射的过程。需要委托去中心化的网络掌管用户的私钥，用户自己掌握跨链上那部分代理资产的私钥。

**解锁：**利用以及掌握的分布式私钥对于锁定的代币进行解锁操作。



























