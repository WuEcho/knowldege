# Layer2与侧链

### 侧链

  侧链和L2等一些脱链解决方案可以帮助以太坊扩大规模，提高交易速度，增加网络可以处理的交易数量。侧链和以太坊L2解决方案的主要区别是，L2继承以太坊主网络的安全性，而侧链依赖于自己的安全性。

  以太坊侧链是一个独立的区块链网络，与以太坊主链并行运行。侧链通过双向挂钩系统与主链连接，允许资产在侧链之间进行交换。

侧链有两种基本类型，一种是相互依赖的，另一种是相互独立的。

  当一条链依赖于另一条链（如以太坊）时，它可以被认为是这个父链的子链。通常，子链不会创建自己的资产，而是从父链的转移中获取资产。侧链有自己的共识协议，通常是为特定类型的交易设计的，目的是为了交易能够更快、更实惠。

  流行的侧链包括Polygon PoS， Skale和Rootstock。以太坊2.0有自己的侧链变体，称为分片链，与最近推出的信标链相连，其目标是最终成为基于权益证明(PoS)的以太坊主链。

  侧链通过一个双向挂钩系统或将桥与主链相连。在主链上，我们可以将自己的以太坊发送到一个充当密码箱的退出地址，这样我们就无法在其他地方使用它。一旦完成该交易，并且通过了“竞赛期”(为了增加安全性)，就会提供一个名为“简单支付验证”(SPV)的收据。这将触发通过智能合约从侧链上的一个密码箱释放相同的值。当从侧链“转移”到主链时，会发生完全相同的过程，只是过程相反。


### L2

L2协议是存在于以太坊链中的链，但能够通过二级框架实现更大的可扩展性。通过在L2处理大量活动来减少主层上的拥塞。与侧链不同，L2通常继承主链的安全属性。

第1 层是底层区块链。以太坊是第1层区块链，因为它是构建各种L2区块链的底层基础。简单地说，L2压缩交易包并将它们提交到以太坊主网络。

L2扩展解决方案包括channel、rollup和plasma。以下是这些独立解决方案的分解：

#### Channel

通过channel，用户直接在链下进行交易，并将链上的交易减少到只包含最重要的信息。具体来说，区块链的一部分是通过智能合约锁定的，因此，在更新它之前，参与交易的参与者必须完全同意。

参与者通过创建和签署可以提交给区块链的交易来更新他们自己的状态。一旦我们想停止使用channel，就退出并将最后一次状态更新提交给主链，主链将再次解锁状态。



#### rollup

rollup在以太坊主网络区块链之外执行交易，然后将多个交易成批处理在一起，然后将它们发送回以太坊主网络。rollup依赖于证明，允许以太坊在不处理交易的情况下验证其正确性。

两种类型的rollup

一般来说，有两种类型的rollup：Zero-knowledge (ZK) rollup和Optimistic rollup。

Zero-Knowledge rollup (ZK rollup)使用有效性证明。每一批交易都包含一个被称为SNARK的加密证明，该证明由以太坊主层上的合约进行验证。

由于只需要在主链上存储有效性证明，而不需要存储大量的交易数据，这种链下计算节省了大量的处理时间，使ZK-rollup更快、更高效。

Optimistic rollup使用欺诈证明。顾名思义，它们乐观地假设所有交易都是有效的，并在没有任何初始证明的情况下提交批次。有一个挑战期，在此期间，其他人能够检测并证明有数据是虚假的。

如果批处理被证明是有欺诈性的，那么Optimistic rollps会执行欺诈证明，并使用以太坊主链上的可用数据运行正确的交易计算。要求参与者根据自己的行为进行奖励或削减，以激励良好的行为。

像Optimism这样的公司通过提供更大的吞吐量、更少的延迟和更低的gas费用来帮助以太坊扩大规模。在撰写本文时，Optimism的gas费用比以太坊便宜10倍。

#### plasma

可以将Plasma视为以太坊的原生侧链，使用智能合约和默克尔树的组合来创建子链的无限分支。这些子链是以太坊主链的较小副本，具有自己的共识机制。

计算和交易数据所需的带宽从父链中卸载，但定期提交到根链。每个子链都依赖于一个欺诈证明系统来保证安全性，该系统类似于rollup，有一个时间段，任何人都55554’、、、、以质疑它的有效性。

与其他侧链的关键区别在于，每个Plasma链区块的“根”都被发布到以太坊，这意味着它继承了主链的安全性。



像Polygon这样的公司为开发者和最终用户提供了更低的gas费用，从而实现了更快的交易。这些明显的好处使得在Plasma 上进行开发非常有吸引力，也很容易看出为什么它们会出现爆炸性的增长。

Alchemy目前支持以太坊第1层链和 Arbitrum L2链。Arbitrum是建立在以太坊之上的独立链，作为智能合约，其支持更快的交易速度、更高的吞吐量、更低的gas费用和更多的好处。活动和交易最终通过Optimistic rollup 从 Arbitrum 中继到第 1 层链。

大规模采用可扩展解决方案，如侧链和L2(channel、rollup和plasma)减轻了以太坊主网的压力，从而帮助更多用户享受较快的交易时间，降低高交易费用，同时仍然保持相同的安全性(在L2解决方案中)和去中心化的应用程序。

